
<div class="config-style">
    <h3 mat-dialog-title>Foodics Account Integration</h3>

    <br>

    <!-- Cancel Reason -->
    <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <h5>Step 1. Request Foodics Account Authorization</h5>
            </mat-panel-title>
        </mat-expansion-panel-header>

        <div>
            <h6 style="color:gray">Through this step, you will authenticate your foodics account and get the code needed in generating foodics access token</h6>
            <h6 style="color:red">*To perform this step, you need to communicate with foodics team to get the information needed to start the integration (client ID, client secret, redirect URL)*</h6>
        </div>
        <br>
        <button mat-flat-button (click)="openInstructionsDialog()">Get Code</button>
    </mat-expansion-panel>

    <br>

    <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <h5>Step 2. Generate Foodics Access Token</h5>
            </mat-panel-title>
        </mat-expansion-panel-header>

        <div>
            <!-- <h6 style="color:gray">Save the URL generated from step 1</h6> -->
            <h6 style="color:gray">Foodics access token is required to finish the integration process and be able to map talabat and foodics products</h6>
        </div>

        <form class="my-form">
            <div>
                <p *ngIf="codeValidationMessage != ''" style="color:red">{{codeValidationMessage}}</p>
                <h6 *ngIf="authorizationCodeMessage != ''" style="color:black" style="margin-bottom: 10px;">{{authorizationCodeMessage}}</h6>
                <br>
                <mat-form-field class="example-full-width">
                    <input (click)="authorizationCodeInputClick()" ngModel (ngModelChange)="authorizationCodeInputChange($event)" matInput style="margin-right: 10px;padding-top: 8px;padding-bottom: 8px;" placeholder="Generated URL from step 1" name="URL" [(ngModel)]="authorizationCode">
                </mat-form-field>
                <!-- <mat-form-field *ngIf="foodicsTokenGenerated === true && foodicsCodeExpired === false" class="example-full-width">
                    <h6 style="color:red">{{timeLeft}} Seconds left until code expiration...</h6>
                </mat-form-field> -->
                <button mat-flat-button (click)="generateFoodicsAccessToken()">Generate Access Token</button>
            </div>
        </form>

    </mat-expansion-panel>

    <ngx-spinner></ngx-spinner>
</div>