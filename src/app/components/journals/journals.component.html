
<h3>Journals</h3>


<div class="header">
    <span class="history"> Sync Job History </span>

    <select class="custom-select" (change)="getSyncJobData()" [(ngModel)]="selectedJob">
        <option [ngValue]="job" *ngFor="let job of jobs">
            {{job.creation_date}} - {{job.status}}</option>
    </select> 
    <button mat-flat-button (click)="getJournalsJobSyncJob()">Sync Journals Now</button>
</div>

<br>
<div id="myProgress" >
    <mat-progress-bar mode="indeterminate" *ngIf="staticgetJournalsLoding" ></mat-progress-bar>
</div>

<br>
<div *ngIf="selectedJob">
    <mat-card class="example-card">
            <mat-card-header>
              <mat-card-title class="title">Sync Details</mat-card-title>
            </mat-card-header>
            <mat-card-content>
            <mat-list-item>      
                <span class="key">Sync status: </span>
                <span class="value" *ngIf="selectedJob.status">{{selectedJob.status}}</span>
                <span class="value" *ngIf="!selectedJob.status">No Info</span>
            </mat-list-item>
            <mat-list-item>      
                <span class="key">Start Date: </span>
                <span class="value" *ngIf="selectedJob.creation_date">{{selectedJob.creation_date}}</span>
                <span class="value" *ngIf="!selectedJob.creation_date">No Info</span>
            </mat-list-item>
            <mat-list-item>      
                <span class="key">End Date: </span>
                <span class="value" *ngIf="selectedJob.end_date">{{selectedJob.end_date}}</span>
                <span class="value" *ngIf="!selectedJob.end_date">No Info</span>
            </mat-list-item>
            <mat-list-item *ngIf="!journals.length"> 
            <span>
                There was no new data to sync in this job, You can sync journals now from <a (click)="getJournalsJobSyncJob()">here</a>
            </span>
            </mat-list-item>
            </mat-card-content>
    </mat-card>
    </div>
    <br>

<div>
<div>
    <div *ngIf="!jobs.length">
        <mat-card class="example-card">
                <mat-card-header>
                  <mat-card-title>No Data</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <p>
                        There was no new data to sync in this job, You can sync consumptions now from 
                    <a  (click)="getJournalsJobSyncJob()">here</a>
                  </p>
                  
                </mat-card-content>
        </mat-card>
        </div>
            
    <div class="main" *ngIf="journals.length">
        <ngx-datatable class="material" [rows]="journals" [columnMode]="'force'" [headerHeight]="50"
            [footerHeight]="50" [rowHeight]="50" [scrollbarV]="true"  [scrollbarH]="true"  [sorts]="[{prop: 'journalBatch', dir: 'asc'}]">
            
            <ngx-datatable-column name="Status">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.status}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Reason">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.reason}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Journal Batch">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.journalBatch}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Description">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.description}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Journal">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.journal}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Journal Description">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.journalDescription}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Ledger">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.ledger}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Accounting Date">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.accountingDate}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Source">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.source}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Category">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.category}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Company">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.company}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Department">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.department}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Location">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.location}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Project">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.project}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Account Credit">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.accountCredit}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Account Debit">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.accountDebit}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Intercompany">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.intercompany}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Product">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.product}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Future 2">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.future2}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Currency">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.currency}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Entered Debit">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.enteredDebit}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Entered Credit">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.enteredCredit}}
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Group Id">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.data.groupId}}
                </ng-template>
            </ngx-datatable-column>
        
        </ngx-datatable>
    </div>

</div>
<ngx-spinner></ngx-spinner>

</div>


