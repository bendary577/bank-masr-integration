<h3 mat-dialog-title>Update Approved Invoice Configuartion</h3>

<div>
    <div *ngIf="!loading && syncJobType">
        <!-- Oracle Hospitality Configurations -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Oracle Hospitality Configurations
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="container" *ngIf="!loading">
                <form class="my-form">
                    <div>
                        <mat-form-field class="example-full-width">
                            <mat-select matInput id="timePeriod" name="timePeriod" placeholder="Time Period" (selectionChange)="chooseTimePeriod()" [(ngModel)]="syncJobType.configuration.timePeriod">
                                <mat-option value="All">All</mat-option>
                                <mat-option value="Today">Today</mat-option>
                                <mat-option value="Yesterday">Yesterday</mat-option>
                                <mat-option value="Current Month">Current Month</mat-option>
                                <mat-option value="Last Month">Last Month</mat-option>
                                <mat-option value="Current Year">Current Year</mat-option>
                                <mat-option value="Last Year">Last Year</mat-option>
                                <mat-option value="UserDefined">User-defined</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div *ngIf="userDefinedFlag">
                        <p>From</p>
                        <mat-form-field class="example-full-width">
                            <input matInput placeholder="Start Date" type="date" name="fromDate" id="fromDate" [(ngModel)]="syncJobType.configuration.fromDate">
                        </mat-form-field>

                        <p>To</p>
                        <mat-form-field class="example-full-width">
                            <input matInput placeholder="End Date" type="date" name="toDate" id="toDate" [(ngModel)]="syncJobType.configuration.toDate">
                        </mat-form-field>
                    </div>

                    <div>
                        <mat-form-field class="example-full-width">
                            <mat-select matInput id="invoiceTypeIncluded" name="invoiceTypeIncluded" placeholder="Invoice Type Included" [(ngModel)]="syncJobType.configuration.invoiceTypeIncluded">
                                <mat-option value="Approved Invoice">Approved Invoices</mat-option>
                                <mat-option value="Account Payable">Account Payable</mat-option>
                                <mat-option value="Both">Both</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                </form>
            </div>

        </mat-expansion-panel>

        <!-- Infor Sun System Configurations -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Infor Sun System
                </mat-panel-title>
            </mat-expansion-panel-header>
            <app-infor-system-configuration [syncJobType]=syncJobType></app-infor-system-configuration>
        </mat-expansion-panel>
        
        <!-- Loction Ledger Analysis Configurations -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Loction Ledger Analysis
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="container" *ngIf="!loading">
                <form class="my-form">

                    <div>
                        <mat-form-field class="example-full-width">
                            <mat-select matInput id="locationAnalysis" name="locationAnalysis" placeholder="Location Ledger Analysis" [(ngModel)]="syncJobType.configuration.locationAnalysis">
                                <mat-option value="1">1</mat-option>
                                <mat-option value="2">2</mat-option>
                                <mat-option value="3">3</mat-option>
                                <mat-option value="4">4</mat-option>
                                <mat-option value="5">5</mat-option>
                                <mat-option value="6">6</mat-option>
                                <mat-option value="7">7</mat-option>
                                <mat-option value="8">8</mat-option>
                                <mat-option value="9">9</mat-option>
                                <mat-option value="10">10</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </form>
            </div>

        </mat-expansion-panel>
        
        <!-- Analysis Configurations -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Analysis
                </mat-panel-title>
            </mat-expansion-panel-header>

            <app-analysis-configuration [analysis]=analysis></app-analysis-configuration>
        </mat-expansion-panel>

        <mat-expansion-panel *ngIf="uniqueOverGroupMapping">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Over Groups Mapping
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngIf="overGroups?.length > 0">

                <ngx-datatable class="material" [rows]="overGroups" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="50" [scrollbarV]="true" [scrollbarH]="true" [sorts]="[]">

                    <ngx-datatable-column name="Over Group">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <mat-checkbox class="example-margin" [(ngModel)]="row.checked" *ngIf="row.overGroup">{{row.overGroup}}</mat-checkbox>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Credit Account">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <input matInput placeholder="Credit Account" [(ngModel)]="row.inventoryAccount">
                        </ng-template>
                    </ngx-datatable-column>


                    <ngx-datatable-column name="Debit Account">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <input matInput placeholder="Debit Account" [(ngModel)]="row.expensesAccount">
                        </ng-template>
                    </ngx-datatable-column>

                </ngx-datatable>
            </div>
        </mat-expansion-panel>
        <br>

        <div class="card-back">
            <button mat-flat-button (click)="onSaveClick()">Save</button>
        </div>
    </div>

    <div *ngIf="!loading && !syncJobType">
        <mat-card class="example-card">
                <mat-card-header>
                    <mat-card-title>Welcome</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>
                        Can't Configure your sync right now, Please try again after few minutes.
                    </p>
                </mat-card-content>
        </mat-card>
    </div>

    <ngx-spinner></ngx-spinner>
</div>